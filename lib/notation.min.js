!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("notation",[],t):"object"==typeof exports?exports.notation=t():e.notation=t()}(this,function(){return r={},o.m=n=[function(e,t,n){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(i){var a=r();return function(){var e,t,n,r,o=l(i);return t=a?(e=l(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?s(n):r}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,l(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)})(e)}function a(e,t,n){return(a=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&c(o,n.prototype),o}).apply(null,arguments)}function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"Notation",function(){return M});var f=Object.setPrototypeOf,k=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,i(Error));var n=o(r);function r(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=n.call(this,t),f(s(e),r.prototype),Object.defineProperty(s(e),"name",{enumerable:!1,writable:!1,value:"NotationError"}),Object.defineProperty(s(e),"message",{enumerable:!1,writable:!0,value:t}),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(s(e),r):Object.defineProperty(s(e),"stack",{enumerable:!1,writable:!1,value:new Error(t).stack}),e}return r}(),h=Object.prototype,p="function"==typeof Symbol?Symbol.prototype.valueOf:null,v=/^[a-z$_][a-z$_\d]*$/i,y=/^\[(\d+)\]$/,g=/^\[(?:'(.*)'|"(.*)"|`(.*)`)\]$/,b=/^(?!!)(.+?)(\.\*|\[\*\])+$/,d=/\w*$/,j={re:{VAR:v,ARRAY_NOTE:y,ARRAY_GLOB_NOTE:/^\[(\d+|\*)\]$/,OBJECT_BRACKETS:g,WILDCARD:/^(\[\*\]|\*)$/,WILDCARDS:/(\*|\[\*\])(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/,NON_NEG_WILDCARD_TRAIL:b,NEGATE_ALL:/^!(\*|\[\*\])$/},type:function(e){return h.toString.call(e).match(/\s(\w+)/i)[1].toLowerCase()},isCollection:function(e){var t=j.type(e);return"object"===t||"array"===t},isset:function(e){return null!=e},ensureArray:function(e){return"array"===j.type(e)?e:null==e?[]:[e]},hasOwn:function(e,t,n){return!!e&&("array"===(n||j.type(e))||"string"!=typeof t?"number"==typeof t&&(0<=t&&t<e.length):t&&h.hasOwnProperty.call(e,t))},cloneDeep:function(t){switch(j.type(t)){case"date":return new Date(t.valueOf());case"regexp":var e=d.exec(t).toString(),n=new t.constructor(t.source,e);return n.lastIndex=t.lastIndex,n;case"symbol":return p?Object(p.call(t)):t;case"array":return t.map(j.cloneDeep);case"object":var r={};return Object.keys(t).forEach(function(e){r[e]=j.cloneDeep(t[e])}),r;default:return t}},each:function(e,t,n){for(var r=e.length,o=-1;++o<r;)if(!1===t.apply(n,[e[o],o,e]))return},eachRight:function(e,t,n){for(var r=e.length;r--;)if(!1===t.apply(n,[e[r],r,e]))return},eachProp:function(e,t,n){for(var r=Object.keys(e),o=-1;++o<r.length;){var i=r[o];if(!1===t.apply(n,[e[i],i,e]))return}},eachItem:function(e,t,n,r){var o=3<arguments.length&&void 0!==r&&r;return"array"===j.type(e)?o?j.eachRight(e,t,n):j.each(e,t,n):j.eachProp(e,t,n)},pregQuote:function(e){return String(e).replace(/[.\\+*?[^\]$(){}=!<>|:-]/g,"\\$&")},stringOrArrayOf:function(e,t){return"string"==typeof t&&(e===t||"array"===j.type(e)&&1===e.length&&e[0]===t)},hasSingleItemOf:function(e,t){return 1===e.length&&(2!==arguments.length||e[0]===t)},removeTrailingWildcards:function(e){return e.replace(b,"$1")},normalizeNote:function(e){if(v.test(e))return e;var t=e.match(y);if(t)return parseInt(t[1],10);if(t=e.match(g))return t[1]||t[2]||t[3];throw new k("Invalid note: '".concat(e,"'"))},joinNotes:function(r){var o=r.length-1;return r.map(function(e,t){if(!e)return"";var n=t+1<=o?r[t+1]:null;return e+(!n||"["===n[0]?"":".")}).join("")},getNewNotation:function(e,t){var n,r="Invalid new notation: '".concat(e,"'");if("string"==typeof e){if(!(n=e.trim()))throw new k(r);return n}if(t&&!j.isset(e))return t;throw new k(r)}};function w(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function O(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=/(\[(\d+|\*|".*"|'.*')\]|[a-z$_][a-z$_\d]*|\*)/gi,R=new RegExp("^!?(\\*|[a-z$_][a-z$_\\d]*|\\[(\\d+|\\*|\".*\"|'.*')\\])(\\[(\\d+|\\*|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*|\\.\\*)*$","i"),D=j.re,A="Invalid glob notation: ",E=function(){function N(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,N);var t=N._inspect(e),n=N.split(t.absGlob);this._=O(O({},t),{},{notes:n,parent:void 0,regexp:void 0})}var e,t,n;return e=N,n=[{key:"create",value:function(e){return new N(e)}},{key:"isValid",value:function(e){return"string"==typeof e&&R.test(e)}},{key:"hasMagic",value:function(e){return N.isValid(e)&&(D.WILDCARDS.test(e)||"!"===e[0])}},{key:"toRegExp",value:function(e){if(!N.isValid(e))throw new k("".concat(A," '").concat(e,"'"));var t=0===e.indexOf("!")?e.slice(1):e,t=j.pregQuote(t).replace(/\\\[\\\*\\\](?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"\\[\\d+\\]").replace(/\\\*(?=(?:[^"]|"[^"]*")*$)(?=(?:[^']|'[^']*')*$)/g,"[a-z$_][a-z$_\\d]*").replace(/\\\?/g,".");return new RegExp("^"+t+"(?:[\\[\\.].+|$)","i")}},{key:"_covers",value:function(e,t,n){var r=2<arguments.length&&void 0!==n&&n,o="string"==typeof e?new N(e):e,i="string"==typeof t?new N(t):t,a=o.notes||N.split(o.absGlob),u=i.notes||N.split(i.absGlob);if(!r&&o.isNegated&&a.length>u.length)return!1;for(var s=!0,c=r?x:I,l=0;l<a.length;l++)if(!c(a[l],u[l])){s=!1;break}return s}},{key:"_intersect",value:function(e,t,n){for(var r,o,i=2<arguments.length&&void 0!==n&&n,a=N.split(e,!0),u=N.split(t,!0),s=i?"!"===e[0]||"!"===t[0]?"!":"":"!"===e[0]&&"!"===t[0]||a.length>u.length&&"!"===e[0]||u.length>a.length&&"!"===t[0]?"!":"",c=Math.max(a.length,u.length),l=[],f=0;f<c;f++)if((r=a[f])===(o=u[f]))l.push(r);else if(r&&D.WILDCARD.test(r))o?l.push(o):l.push(r);else if(o&&D.WILDCARD.test(o))r?l.push(r):l.push(o);else if(r&&!o)l.push(r);else{if(r||!o){l=[];break}l.push(o)}return 0<l.length?s+j.joinNotes(l):null}},{key:"_inspect",value:function(e){var t=e.trim();if(!N.isValid(t))throw new k("".concat(A," '").concat(e,"'"));var n="!"===t[0];n||(t=j.removeTrailingWildcards(t));var r=n?t.slice(1):t;return{glob:t,absGlob:r,isNegated:n,isArrayGlob:/^\[[^'"]/.test(r)}}},{key:"split",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!N.isValid(e))throw new k("".concat(A," '").concat(e,"'"));return(!("!"===e[0])&&n?j.removeTrailingWildcards(e):e).replace(/^!/,"").match(m)}},{key:"compare",value:function(e,t){if(e===t||D.WILDCARD.test(e)&&D.WILDCARD.test(t))return 0;var n=new N(e),r=new N(t);if(n.notes.length!==r.notes.length)return n.notes.length<r.notes.length?-1:1;var o=function(e,t){var n=D.ARRAY_GLOB_NOTE;if(!(e.isNegated&&t.isNegated&&e.notes.length===t.notes.length&&n.test(e.last)&&n.test(t.last)&&e.last!==t.last))return 0;if("[*]"===e.last)return 1;if("[*]"===t.last)return-1;if(e.parent&&t.parent){return(0,E._covers)(e.parent,t.parent,!0)?T(e.last,t.last):0}return T(e.last,t.last)}(n,r);if(0!==o)return o;var i=(n.absGlob.match(D.WILDCARDS)||[]).length,a=(r.absGlob.match(D.WILDCARDS)||[]).length;return i===a?!n.isNegated&&r.isNegated?-1:n.isNegated&&!r.isNegated?1:n.absGlob<r.absGlob?-1:n.absGlob>r.absGlob?1:0:a<i?-1:1}},{key:"sort",value:function(e){return e.sort(N.compare)}},{key:"normalize",value:function(e,t){var g=1<arguments.length&&void 0!==t&&t,n=N._inspect,b=N._covers,i=N._intersect,d=j.ensureArray(e);if(0===d.length)return[];var w=d.concat().sort(g?S:$).map(n);if(1===w.length){var r=w[0];return r.isNegated?[]:[r.glob]}var o=!1,O=[],_={},a={};function m(e,t){var n,r,o=i(e,t,g);o&&(n=!g&&0<=d.indexOf("!"===(r=o)[0]?r.slice(1):"!"+r),0<=w.indexOf(o)||n||(a[o]=o))}return j.eachRight(w,function(a,u){if(D.NEGATE_ALL.test(a.glob)&&(o=!0,g))return!1;var s=!1,c=!1,l=!1,f=!1,h=!1,p=!1,v=!1,y=!1;j.eachRight(w,function(e,t){if(u!==t){if(a.isArrayGlob!==e.isArrayGlob)throw new k("Integrity failed. Cannot have both object and array notations for root level: ".concat(JSON.stringify(d)));if(a.glob===e.glob)return w.splice(u,1),!(s=!0);if(!a.isNegated&&(r=e,(n=a).isNegated!==r.isNegated&&n.absGlob===r.absGlob))return _[a.glob]=!0,!(c=!0);var n,r;if(!_[e.glob]){var o=b(a,e),i=!o&&b(e,a);if(a.isNegated)if(e.isNegated){if(i)return h=!0,!(_[a.glob]=!0)}else o&&(l=!0),i&&(f=!0),o||i||m(a.glob,e.glob);else if(e.isNegated){if(i)return v=!0,g?!(_[a.glob]=!0):void 0;o||i||m(a.glob,e.glob)}else if(o&&(p=o),i&&(y=!0,g))return!1}}});var e=g?(l||f)&&!1===h:f&&!1===h,t=g?(p||!1===y)&&!1===v:v||!1===y;!1===s&&!1===c&&(a.isNegated?e:t)?O.push(a.glob):_[a.glob]=!0}),g&&o?[]:0<(a=Object.keys(a)).length?(O=O.concat(a),N.normalize(O,g)):N.sort(O)}},{key:"_compareUnion",value:function(e,t,h,n){var p=3<arguments.length&&void 0!==n?n:[],v=N._covers,y=N._inspect,g=N._intersect;return j.eachRight(e,function(r){var o,i,a,u,s,c,l,f,e;0<=p.indexOf(r)||(o=y(r),D.WILDCARD.test(o.absGlob)?p.push(o.glob):(l=c=s=u=a=i=!1,f=[],j.eachRight(t,function(e){r===e&&(a=!0);var t,n=y(e);(i=!v(n,o))?o.isNegated&&n.isNegated&&((t=g(o.glob,n.glob,h))&&-1===p.indexOf(t)&&f.push(t)):o.isNegated?n.isNegated?u=!a:s=!0:n.isNegated?l=!0:c=!a}),e=o.isNegated?!s||u:!c||l,a||e||i&&!o.isNegated?p.push(o.glob):o.isNegated&&s&&!u&&0<f.length&&(p=p.concat(f))))}),p}},{key:"union",value:function(e,t,n){var r=N.normalize,o=N._compareUnion,i=r(e,n),a=r(t,n);if(0===i.length)return a;if(0===a.length)return i;var u=o(i,a,n);return u=o(a,i,n,u),r(u,n)}}],(t=[{key:"test",value:function(e){if(!M.isValid(e))throw new k("Invalid notation: '".concat(e,"'"));return N._covers(this,e)}},{key:"covers",value:function(e){return N._covers(this,e)}},{key:"intersect",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;return N._intersect(this.glob,e,n)}},{key:"glob",get:function(){return this._.glob}},{key:"absGlob",get:function(){return this._.absGlob}},{key:"isNegated",get:function(){return this._.isNegated}},{key:"regexp",get:function(){return this._.regexp=this._.regexp||N.toRegExp(this.absGlob),this._.regexp}},{key:"notes",get:function(){return this._.notes}},{key:"levels",get:function(){return this._.notes}},{key:"first",get:function(){return this.notes[0]}},{key:"last",get:function(){return this.notes[this.notes.length-1]}},{key:"parent",get:function(){return void 0===this._.parent&&(this._.parent=1<this.notes.length?this.absGlob.slice(0,-this.last.length).replace(/\.$/,""):null),this._.parent}}])&&_(e.prototype,t),n&&_(e,n),N}();function I(e,t){if(!e||!t)return!1;var n=D.ARRAY_GLOB_NOTE.test(t);return"*"===e?!n:"[*]"===e?n:!D.WILDCARD.test(t)&&j.normalizeNote(e)===j.normalizeNote(t)}function x(e,t){return!e||!t||(I(e,t)||I(t,e))}function N(e){return parseInt(e.replace(/[[\]]/,""),10)}function T(e,t){var n=N(e);return N(t)<n?-1:1}var P=/^\s*!/;function S(e,t){return P.test(e)?-1:P.test(t)?1:0}function $(e,t){return P.test(e)?1:P.test(t)?-1:0}function G(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function C(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?G(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L={SOURCE:"Invalid source. Expected a data object or array.",DEST:"Invalid destination. Expected a data object or array.",NOTATION:"Invalid notation: ",NOTA_OBJ:"Invalid notations object. ",NO_INDEX:"Implied index does not exist: ",NO_PROP:"Implied property does not exist: "},W=/(\[(\d+|".*"|'.*'|`.*`)\]|[a-z$_][a-z$_\d]*)/gi,V=new RegExp("^([a-z$_][a-z$_\\d]*|\\[(\\d+|\".*\"|'.*')\\])(\\[(\\d+|\".*\"|'.*')\\]|\\.[a-z$_][a-z$_\\d]*)*$","i"),B=Object.freeze({strict:!1,preserveIndices:!1}),M=function(){function w(e,t){if(!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),0===arguments.length)this._source={};else{if(!j.isCollection(e))throw new k(L.SOURCE);this._source=e}this._isArray="array"===j.type(this._source),this.options=t}var e,t,n;return e=w,n=[{key:"create",value:function(e,t){return 0===arguments.length?new w({}):new w(e,t)}},{key:"isValid",value:function(e){return"string"==typeof e&&V.test(e)}},{key:"split",value:function(e){if(!w.isValid(e))throw new k(L.NOTATION+"'".concat(e,"'"));return e.match(W)}},{key:"join",value:function(e){return j.joinNotes(e)}},{key:"countNotes",value:function(e){return w.split(e).length}},{key:"countLevels",value:function(e){return w.countNotes(e)}},{key:"first",value:function(e){return w.split(e)[0]}},{key:"last",value:function(e){var t=w.split(e);return t[t.length-1]}},{key:"parent",value:function(e){var t=w.last(e);return e.slice(0,-t.length).replace(/\.$/,"")||null}},{key:"eachNote",value:function(e,n){var r=w.split(e),o=[];j.each(r,function(e,t){if(o.push(e),!1===n(w.join(o),e,t,r))return!1},w)}},{key:"eachLevel",value:function(e,t){w.eachNote(e,t)}}],(t=[{key:"each",value:function(e){return J(this._source,e),this}},{key:"eachValue",value:function(e,o){var i=this._source;return w.eachNote(e,function(e,t,n,r){if(i=j.hasOwn(i,t)?i[t]:void 0,!1===o(i,e,t,n,r))return!1}),this}},{key:"getNotations",value:function(){var t=[];return this.each(function(e){t.push(e)}),t}},{key:"clone",value:function(){return this._source=j.cloneDeep(this._source),this}},{key:"flatten",value:function(){var r={};return this.each(function(e,t,n){r[e]=n}),this._source=r,this}},{key:"expand",value:function(){return this._source=w.create({}).merge(this._source).value,this}},{key:"aggregate",value:function(){return this.expand()}},{key:"inspectGet",value:function(o){var i,a=this._source,u={has:!1,value:void 0};return w.eachNote(o,function(e,t,n){var r=j.normalizeNote(t);if(!j.hasOwn(a,r))return!(u={notation:o,has:!1,type:"undefined",level:n+1,lastNote:t,lastNoteNormalized:r});a=a[r],u={notation:o,has:!0,value:i=a,type:j.type(a),level:n+1,lastNote:t,lastNoteNormalized:r}}),(void 0===i||u.has&&i===u.value)&&(i=this._source),u.parentIsArray="array"===j.type(i),u}},{key:"inspectRemove",value:function(e){if(!e)throw new Error(L.NOTATION+"'".concat(e,"'"));var t,n,r=w.parent(e),o=r?this.get(r,null):this._source,i="array"===j.type(o),a=w.split(e),u=a[a.length-1],s=j.normalizeNote(u);return j.hasOwn(o,s)?(t={notation:e,has:!0,value:n=o[s],type:j.type(n),level:a.length,lastNote:u,lastNoteNormalized:s,parentIsArray:i},!this.options.preserveIndices&&i?o.splice(s,1):delete o[s]):t={notation:e,has:!1,type:"undefined",level:a.length,lastNote:u,lastNoteNormalized:s,parentIsArray:i},t}},{key:"has",value:function(e){return this.inspectGet(e).has}},{key:"hasDefined",value:function(e){return void 0!==this.inspectGet(e).value}},{key:"get",value:function(e,t){var n=this.inspectGet(e);if(this.options.strict&&arguments.length<2&&!n.has){var r=n.parentIsArray?L.NO_INDEX:L.NO_PROP;throw new k(r+"'".concat(e,"'"))}return n.has?n.value:t}},{key:"set",value:function(e,i,t){var a=2<arguments.length&&void 0!==t?t:"overwrite";if(!e.trim())throw new k(L.NOTATION+"'".concat(e,"'"));!0===a&&(a="overwrite");var u,s,c,l,f,h=this._source,p="Cannot set value by inserting at index, on an object";return w.eachNote(e,function(e,t,n,r){if(u=n===r.length-1,s=c||j.normalizeNote(t),c=u?null:j.normalizeNote(r[n+1]),"array"===(f=j.type(h))&&"number"!=typeof s){var o=w.parent(e)||"source";throw new k("Cannot set string key '".concat(t,"' on array ").concat(o))}if(j.hasOwn(h,s,f))if(u){if("overwrite"===a)h[s]=i;else if("insert"===a){if("array"!==f)throw new k(p);h.splice(s,0,i)}}else h=h[s];else{if(u&&"array"!==f&&"insert"===a)throw new k(p);l="number"==typeof c,h[s]=u?i:l?[]:{},h=h[s]}}),this}},{key:"merge",value:function(t,e){var n,r=this,o=!(1<arguments.length&&void 0!==e)||e;if("object"!==j.type(t))throw new k(L.NOTA_OBJ+"Expected an object.");return j.each(Object.keys(t),function(e){n=t[e],r.set(e,n,o)}),this}},{key:"separate",value:function(e){var n=this;if("array"!==j.type(e))throw new k(L.NOTA_OBJ+"Expected an array.");var r=new w({});return j.each(e,function(e){var t=n.inspectRemove(e);r.set(e,t.value)}),this._source=r._source,this}},{key:"filter",value:function(e,t){var g=this,n=1<arguments.length&&void 0!==t?t:{},b=j.re,r=E.normalize(e,n.restrictive),o=r.length,i=this._isArray?[]:{};if(0===o||1===o&&(!r[0]||b.NEGATE_ALL.test(r[0])))return this._source=i,this;var d,a=j.cloneDeep(this.value),u=b.WILDCARD.test(r[0]);return 1===o&&u?this._source=a:(u?(d=new w(a),r.shift()):d=new w(i),j.each(r,function(e){var o,i,a,u=new E(e),t=u.glob,n=u.absGlob,s=u.isNegated,c=u.levels;".*"===n.slice(-2)?(o=n.slice(0,-2),s&&(i={}),a="object"):"[*]"===n.slice(-3)?(o=n.slice(0,-3),s&&(i=[]),a="array"):o=n;var l="Integrity failed for glob '".concat(t,"'. Cannot set empty ").concat(a," for '").concat(o,"' which has a type of ");if(!1===b.WILDCARDS.test(o)){if(s){var r=d.inspectRemove(o);if(i){var f=r.type,h=l+"'".concat(f,"'."),p=j.isset(r.value);if(p&&f!==a||!p&&g.options.strict)throw new k(h);var v=r.parentIsArray?"insert":"overwrite";d.set(o,i,v)}}else{var y=g.inspectGet(o);y.has&&d.set(o,y.value,"overwrite")}return!0}J(g._source,function(e,t,n){if(!E.create(o).covers(e))return!0;if(g.options.strict&&i){var r=j.type(n);if(r!==a&&w.split(e).length===c.length-1)throw new k(l+"'".concat(r,"'."))}w.eachNote(e,function(e){if(u.test(e)){var t=w.split(e).length;if(s&&c.length<=t)return d.remove(e),!1;d.set(e,n,"overwrite")}})},!0)}),this._source=d.value),this}},{key:"remove",value:function(e){var t=this.inspectRemove(e);if(!this.options.strict||t.has)return this;var n=t.parentIsArray?L.NO_INDEX:L.NO_PROP;throw new k(n+"'".concat(e,"'"))}},{key:"delete",value:function(e){return this.remove(e),this}},{key:"copyTo",value:function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:null,i=!(3<arguments.length&&void 0!==r)||r;if(!j.isCollection(e))throw new k(L.DEST);var a,u=this.inspectGet(t);return u.has&&(a=j.getNewNotation(o,t),w.create(e).set(a,u.value,i)),this}},{key:"copyFrom",value:function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:null,i=!(3<arguments.length&&void 0!==r)||r;if(!j.isCollection(e))throw new k(L.DEST);var a,u=w.create(e).inspectGet(t);return u.has&&(a=j.getNewNotation(o,t),this.set(a,u.value,i)),this}},{key:"moveTo",value:function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:null,i=!(3<arguments.length&&void 0!==r)||r;if(!j.isCollection(e))throw new k(L.DEST);var a,u=this.inspectRemove(t);return u.has&&(a=j.getNewNotation(o,t),w.create(e).set(a,u.value,i)),this}},{key:"moveFrom",value:function(e,t,n,r){var o=2<arguments.length&&void 0!==n?n:null,i=!(3<arguments.length&&void 0!==r)||r;if(!j.isCollection(e))throw new k(L.DEST);var a,u=w.create(e).inspectRemove(t);return u.has&&(a=j.getNewNotation(o,t),this.set(a,u.value,i)),this}},{key:"rename",value:function(e,t,n){return this.moveTo(this._source,e,t,n)}},{key:"renote",value:function(e,t,n){return this.rename(e,t,n)}},{key:"extract",value:function(e,t){var n={};return this.copyTo(n,e,t),n}},{key:"copyToNew",value:function(e,t){return this.extract(e,t)}},{key:"extrude",value:function(e,t){var n={};return this.moveTo(n,e,t),n}},{key:"moveToNew",value:function(e,t){return this.extrude(e,t)}},{key:"options",get:function(){return this._options},set:function(e){this._options=C(C(C({},B),this._options||{}),e||{})}},{key:"value",get:function(){return this._source}}])&&z(e.prototype,t),n&&z(e,n),w}();function J(e,i,t,n,r,o){var a=2<arguments.length&&void 0!==t&&t,u=3<arguments.length&&void 0!==n&&n,s=4<arguments.length&&void 0!==r?r:null,c=(5<arguments.length&&void 0!==o?o:null)||e;j.eachItem(e,function(e,t){var n="number"==typeof t?"[".concat(t,"]"):t,r=M.join([s,n]),o=j.isCollection(e);if((!o||u)&&!1===i(r,n,e,c))return!1;o&&J(e,i,a,u,r,c)},null,a)}M.Error=k,M.Glob=E,M.utils=j}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="lib/",o(o.s=0);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});
//# sourceMappingURL=notation.min.js.map